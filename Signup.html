<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MindMates | Sign Up</title>

  <link rel="stylesheet" href="style2.css">

</head>

<body>
<div class="container">
  <div class="card">
    <h2>Create Account</h2>

    <div class="role-selection">
  <button class="role active" id="citizenBtn">Citizen</button>
  <button class="role" id="hospitalBtn">Hospital</button>
</div>


    <div class="input-group">
      <label>Full Name</label>
      <input type="text" id="name">
    </div>

    <div class="input-group">
      <label>Email</label>
      <input type="email" id="email">
    </div>

    <div class="input-group">
      <label>Password</label>
      <input type="password" id="password">
    </div>

    <div class="input-group">
      <label>Confirm Password</label>
      <input type="password" id="confirmPassword">
    </div>

    <button class="login-btn" id="signupBtn">Sign Up</button>

    <div class="divider">or</div>

    <button class="anonymous-btn" id="anonBtn" onclick="openCitizen()">Continue Anonymously</button>

    <div class="signup" onclick="openCitizen()">
      Already have an account? </div><a href="login.html" style="display: block; text-align: center; padding-top: 10px;">
  Login
</a>

    </p>
  </div>
</div>
<script>
let selectedRole = "citizen";

const citizenBtn = document.getElementById("citizenBtn");
const hospitalBtn = document.getElementById("hospitalBtn");
const signupBtn = document.getElementById("signupBtn");
const anonBtn = document.getElementById("anonBtn");

/* ================= ROLE SELECTION ================= */
citizenBtn.addEventListener("click", () => {
  selectedRole = "citizen";
  citizenBtn.classList.add("active");
  hospitalBtn.classList.remove("active");
});

hospitalBtn.addEventListener("click", () => {
  selectedRole = "hospital";
  hospitalBtn.classList.add("active");
  citizenBtn.classList.remove("active");
});

/* ================= SIGNUP ================= */
signupBtn.addEventListener("click", async () => {
  const name = document.getElementById("name").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const confirmPassword = document.getElementById("confirmPassword").value.trim();

  if (!name || !email || !password || !confirmPassword) {
    alert("All fields are required");
    return;
  }

  if (password !== confirmPassword) {
    alert("Passwords do not match");
    return;
  }

  try {
    const res = await fetch("http://localhost:5000/api/auth/register", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        name,
        email,
        password,
        role: selectedRole
      })
    });

    const data = await res.json();

    if (!res.ok) {
      alert(data.message || "Registration failed");
      return;
    }

    // âœ… SUCCESS
    alert("Registration successful!");

    if (selectedRole === "hospital") {
      window.location.href = "hospitalDashboard.html";
    } else {
      window.location.href = "citizenDashboard.html";
    }

  } catch (error) {
    console.error("Signup error:", error);
    alert("Server not responding. Check backend.");
  }
});

/* ================= ANONYMOUS ================= */
anonBtn.addEventListener("click", () => {
  window.location.href = "citizenDashboard.html";
});
</script>


</body>
</html>
